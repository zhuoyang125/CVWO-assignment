{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\zhuoy\\\\Documents\\\\basic-web-dev\\\\CVWO-assignment\\\\railsToDo\\\\todo_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\zhuoy\\\\Documents\\\\basic-web-dev\\\\CVWO-assignment\\\\railsToDo\\\\todo_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\zhuoy\\\\Documents\\\\basic-web-dev\\\\CVWO-assignment\\\\railsToDo\\\\todo_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\zhuoy\\\\Documents\\\\basic-web-dev\\\\CVWO-assignment\\\\railsToDo\\\\todo_frontend\\\\src\\\\components\\\\List.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport Update from \"./Update\";\nimport Alert from \"./Alert\";\nimport { animateScroll as scroll } from \"react-scroll\";\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\n\nfunction List(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      updateMode = _useState2[0],\n      setUpdateMode = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filterMode = _useState4[0],\n      setFilterMode = _useState4[1];\n\n  var _useState5 = useState({\n    todo_title: \"\",\n    due_date: \"\",\n    todo_tag: \"\"\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      taskToUpdate = _useState6[0],\n      setTaskToUpdate = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      listOfFilteredTasks = _useState8[0],\n      setListOfFilteredTasks = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      deletedTask = _useState10[0],\n      setDeletedTask = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      dueDate = _useState12[0],\n      setDueDate = _useState12[1];\n\n  function reset() {\n    setUpdateMode(false);\n    setFilterMode(false);\n    props.setSearchMode(false);\n  }\n\n  function filterTasks(event) {\n    setFilterMode(true);\n\n    if (event.target.value === \"\") {\n      setListOfFilteredTasks(props.listOfTasks);\n    } else {\n      var filtered = props.listOfTasks.filter(function (item) {\n        return item.todo_tag.toUpperCase() === event.target.value.toUpperCase();\n      });\n      setListOfFilteredTasks(filtered);\n    }\n  }\n\n  function selectUpdate(taskItem) {\n    scroll.scrollToBottom({\n      duration: 300,\n      smooth: true\n    });\n    setTaskToUpdate(taskItem);\n    setUpdateMode(true);\n    setDueDate(taskItem.due_date);\n  }\n\n  function listTask(taskItem) {\n    var current_date = new Date();\n    var late = new Date(taskItem.due_date) < current_date;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      style: {\n        color: late ? \"red\" : \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, taskItem.todo_title, \" \\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      class: \"badge rounded-pill\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 89\n      }\n    }, taskItem.todo_tag)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: late ? \"red\" : \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CalendarTodayIcon, {\n      fontSize: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 64\n      }\n    }), \" \\xA0\", taskItem.due_date)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-outline-danger\",\n      onClick: function onClick() {\n        return deleteTask(taskItem);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-outline-dark\",\n      onClick: function onClick() {\n        return selectUpdate(taskItem);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, \"Update\"), props.searchMode ? /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-outline-dark\",\n      onClick: function onClick() {\n        return reset();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 37\n      }\n    }, \"Back\") : null);\n  }\n\n  function sortDate(listOfTasks) {\n    listOfTasks.sort(function (a, b) {\n      if (new Date(a.due_date) < new Date(b.due_date)) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    return listOfTasks;\n  }\n\n  var deleteTask = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(taskItem) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setDeletedTask(taskItem.todo_title);\n              _context.next = 3;\n              return fetch(\"http://localhost:3000/todos/\" + taskItem.id, {\n                method: \"delete\"\n              });\n\n            case 3:\n              response = _context.sent;\n              reset();\n              _context.next = 7;\n              return props.getTasks();\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function deleteTask(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    props.getTasks();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, deletedTask !== \"\" ? /*#__PURE__*/React.createElement(Alert, {\n    todo_title: deletedTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 36\n    }\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: '#585858'\n    },\n    class: \"display-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Tasks...\")), props.searchMode && props.searchResults.length === 0 || filterMode && listOfFilteredTasks.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    class: \"fs-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, \"No Tasks Found.\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn btn-outline-dark\",\n    onClick: function onClick() {\n      return reset();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, \"Back\")) : props.searchMode ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  })) : props.listOfTasks.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    onChange: filterTasks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, \"All\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"school\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, \"School\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"work\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, \"Work\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"personal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, \"Personal\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"important\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, \"Important\"))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"list-tasks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, props.searchMode ? sortDate(props.searchResults).map(listTask) : filterMode ? sortDate(listOfFilteredTasks).map(listTask) : sortDate(props.listOfTasks).map(listTask)), /*#__PURE__*/React.createElement(Update, {\n    taskItem: taskToUpdate,\n    getTasks: props.getTasks,\n    update_mode: updateMode,\n    setUpdateMode: setUpdateMode,\n    setTaskToUpdate: setTaskToUpdate,\n    reset: reset,\n    dueDate: dueDate,\n    setDueDate: setDueDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default List;","map":{"version":3,"sources":["C:/Users/zhuoy/Documents/basic-web-dev/CVWO-assignment/railsToDo/todo_frontend/src/components/List.jsx"],"names":["React","useEffect","useState","Update","Alert","animateScroll","scroll","CalendarTodayIcon","List","props","updateMode","setUpdateMode","filterMode","setFilterMode","todo_title","due_date","todo_tag","taskToUpdate","setTaskToUpdate","listOfFilteredTasks","setListOfFilteredTasks","deletedTask","setDeletedTask","dueDate","setDueDate","reset","setSearchMode","filterTasks","event","target","value","listOfTasks","filtered","filter","item","toUpperCase","selectUpdate","taskItem","scrollToBottom","duration","smooth","listTask","current_date","Date","late","color","deleteTask","searchMode","sortDate","sort","a","b","fetch","id","method","response","getTasks","searchResults","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Update from \"./Update\";\r\nimport Alert from \"./Alert\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nfunction List(props){\r\n\r\n    const [updateMode, setUpdateMode] = useState(false);   \r\n    \r\n    const [filterMode, setFilterMode] = useState(false);\r\n\r\n    const [taskToUpdate, setTaskToUpdate] = useState({\r\n        todo_title:\"\",\r\n        due_date:\"\",\r\n        todo_tag:\"\",\r\n    });\r\n\r\n\r\n    const [listOfFilteredTasks, setListOfFilteredTasks] = useState([]);\r\n\r\n    const [deletedTask, setDeletedTask] = useState(\"\");\r\n\r\n    const [dueDate, setDueDate] = useState(\"\");\r\n\r\n    function reset(){\r\n        setUpdateMode(false);\r\n        setFilterMode(false);\r\n        props.setSearchMode(false);\r\n    }\r\n    \r\n\r\n    function filterTasks(event){\r\n        setFilterMode(true);\r\n        if (event.target.value === \"\") {\r\n            setListOfFilteredTasks(props.listOfTasks);\r\n        } else {\r\n            const filtered = props.listOfTasks.filter(item => {\r\n                return item.todo_tag.toUpperCase() === event.target.value.toUpperCase();\r\n            });\r\n            setListOfFilteredTasks(filtered);\r\n        }\r\n    }\r\n\r\n    function selectUpdate(taskItem) {\r\n        scroll.scrollToBottom({duration: 300, smooth: true});\r\n        setTaskToUpdate(taskItem);\r\n        setUpdateMode(true);\r\n        setDueDate(taskItem.due_date);\r\n    }\r\n\r\n\r\n    function listTask(taskItem){\r\n        const current_date = new Date();\r\n        let late = new Date(taskItem.due_date) < current_date;\r\n\r\n        return (\r\n            <div class=\"item\">\r\n                <h5 style={{color: late ? \"red\" : \"black\"}}>{taskItem.todo_title} &nbsp;<span class=\"badge rounded-pill\">{taskItem.todo_tag}</span></h5>\r\n                <br/>\r\n                <div class=\"date\">\r\n                    \r\n                    <p style={{color: late ? \"red\" : \"black\"}}><CalendarTodayIcon fontSize=\"small\" /> &nbsp;{taskItem.due_date}</p>\r\n                </div>                \r\n                <br/>\r\n                <button class=\"btn btn-outline-danger\" onClick={() => deleteTask(taskItem)}>Delete</button>\r\n                <button class=\"btn btn-outline-dark\" onClick={() => selectUpdate(taskItem)}>Update</button>\r\n                {props.searchMode ? <button class=\"btn btn-outline-dark\" onClick={() => reset() }>Back</button> : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function sortDate(listOfTasks){\r\n        listOfTasks.sort((a, b) => {\r\n            if (new Date(a.due_date) < new Date(b.due_date)){\r\n                return -1;\r\n            } else {\r\n                return 1;\r\n            }\r\n        });\r\n        return listOfTasks;\r\n    }\r\n\r\n    const deleteTask = async taskItem => {\r\n        setDeletedTask(taskItem.todo_title);\r\n        const response = await fetch(\"http://localhost:3000/todos/\" + taskItem.id, {\r\n            method: \"delete\",\r\n        })\r\n        reset();\r\n        await props.getTasks();\r\n\r\n    }\r\n\r\n   \r\n\r\n    useEffect(() => {props.getTasks()}, []);\r\n\r\n\r\n    return(\r\n        <div>\r\n            { deletedTask !== \"\" ? <Alert todo_title={deletedTask} /> : null }\r\n            <div class=\"heading\">\r\n                <h1 style={{color: '#585858'}} class=\"display-6\">Tasks...</h1>\r\n            </div>\r\n                \r\n            \r\n            { (props.searchMode && props.searchResults.length === 0) || (filterMode && listOfFilteredTasks.length === 0) ? \r\n                <div class=\"heading\">\r\n                    <p class=\"fs-4\">No Tasks Found.</p>\r\n                    <br/>\r\n                    <br/>\r\n                    <button class=\"btn btn-outline-dark\" onClick={() => reset() }>Back</button>\r\n                </div> : props.searchMode ? \r\n                <div>\r\n                    <br/>\r\n                </div> : props.listOfTasks.length > 0 ?\r\n                <div class=\"filter\">\r\n                    <select onChange={filterTasks}>\r\n                        <option value=\"\">All</option>\r\n                        <option value=\"school\">School</option>\r\n                        <option value=\"work\">Work</option>\r\n                        <option value=\"personal\">Personal</option>\r\n                        <option value=\"important\">Important</option>\r\n                    </select>\r\n                </div> : null\r\n            }\r\n            <div class=\"list-tasks\">\r\n                {props.searchMode ? sortDate(props.searchResults).map(listTask) \r\n                                    : filterMode ? sortDate(listOfFilteredTasks).map(listTask) \r\n                                            : sortDate(props.listOfTasks).map(listTask)}\r\n            </div>\r\n\r\n            <Update taskItem={taskToUpdate}\r\n                    getTasks={props.getTasks} \r\n                    update_mode={updateMode}\r\n                    setUpdateMode={setUpdateMode}\r\n                    setTaskToUpdate={setTaskToUpdate}\r\n                    reset={reset}\r\n                    dueDate={dueDate}\r\n                    setDueDate={setDueDate}  />\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default List;"]},"metadata":{},"sourceType":"module"}